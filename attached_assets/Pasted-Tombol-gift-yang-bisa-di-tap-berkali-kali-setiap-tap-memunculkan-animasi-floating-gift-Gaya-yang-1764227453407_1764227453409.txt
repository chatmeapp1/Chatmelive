Tombol gift yang bisa di-tap berkali-kali → setiap tap memunculkan animasi floating gift.

Gaya yang kamu mau seperti aplikasi live (BIGO, Mango, Fancy, 17Live):
Tap cepat → spam gift → animasi muncul terus.


---

1. Konsep Sistem (wajib untuk smooth & tidak lag)

Tombol gift bekerja seperti ini:

1. User tap tombol gift (tap cepat juga boleh).


2. Setiap tap → trigger event:

onGiftTap()


3. Event ini menambah item ke array:

floatingQueue.push({
    id: unique,
    giftName: "gift",
    avatar,
    username
})


4. Floating system membaca queue → animasi berjalan satu per satu / overlap.




---

2. Contoh Struktur React Native

Tombol Gift

Dibuat sebagai button dengan onPress memanggil handler:

<TouchableOpacity
  onPress={handleGiftTap}
  style={styles.giftButton}
>
  <Image source={require("@/assets/gift.png")} style={styles.icon} />
</TouchableOpacity>


---

3. Handler Tap Gift

Setiap tap akan langsung menambah gift baru ke floating system.

const handleGiftTap = () => {
  const newGift = {
    id: Date.now() + Math.random(),
    username: currentUser,
    avatar: currentAvatar,
    giftName: "WIN 500s",
    type: "normal"
  };

  setActiveGift(newGift); 
};

Kalau kamu mau tap cepat tanpa delay, tambahkan:

unstable_batchedUpdates(() => {
  setActiveGift({...newGift});
});


---

4. Floating Gift Component (anti duplikat + anti delay)

Gunakan multiplexer container:

✓ Efek muncul banyak
✓ Tidak saling tabrakan
✓ Tidak delay
✓ Tidak double send

<FloatingGiftMultiContainer activeGift={activeGift} />


---

5. Logic Anti-Double / Anti-Duplicate

Kalau kamu ingin SETIAP TAP → animasi baru, maka jangan pakai merge by spenderId.

Ganti menjadi:

setBanners(prev => {
  return [
    ...prev,
    {
      id: gift.id,
      username: gift.username,
      giftName: gift.giftName,
      avatar: gift.avatar,
      count: 1,
      type: gift.type,
      isActive: true
    }
  ];
});


---

6. Animasi Keluar Setelah Durasi

setTimeout(() => {
  setBanners(prev => prev.filter(b => b.id !== gift.id));
}, 1800); // 1.8 detik animasi
